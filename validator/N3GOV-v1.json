{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "definitions": {
        "Address": {
            "description": "Ethereum address",
            "pattern": "^0x[a-fA-F0-9]{40}$",
            "type": "string"
        },
        "AlternativeSnapshotVotingSystems": {
            "enum": [
                "approval",
                "ranked-choice",
                "single-choice",
                "weighted"
            ],
            "title": "Voting system",
            "type": "string"
        },
        "Array": {
            "items": {
                "type": "string"
            },
            "type": "array"
        },
        "Array_1": {
            "items": {
                "anyOf": [
                    {
                        "$ref": "#/definitions/ERC20Transfer"
                    },
                    {
                        "$ref": "#/definitions/ERC20Approval"
                    },
                    {
                        "$ref": "#/definitions/ContractCall"
                    }
                ]
            },
            "type": "array"
        },
        "Array_2": {
            "items": {
                "$ref": "#/definitions/ContractCall"
            },
            "type": "array"
        },
        "Array_3": {
            "items": {
                "$ref": "#/definitions/ERC20Transfer"
            },
            "type": "array"
        },
        "Array_4": {
            "items": {
                "anyOf": [
                    {
                        "$ref": "#/definitions/Vote",
                        "description": "Snapshot Vote related to the proposal"
                    },
                    {
                        "$ref": "#/definitions/SnapshotVote",
                        "description": "Snapshot vote related to the proposal"
                    }
                ]
            },
            "type": "array"
        },
        "ChainId": {
            "default": 1,
            "description": "Only supporting Ethereum for now",
            "enum": [
                1
            ],
            "title": "Chain ID",
            "type": "number"
        },
        "ContractCall": {
            "allOf": [
                {
                    "properties": {
                        "chainId": {
                            "$ref": "#/definitions/ChainId"
                        },
                        "from": {
                            "$ref": "#/definitions/DAOAgents"
                        },
                        "to": {
                            "$ref": "#/definitions/Address",
                            "title": "Address to send the transaction to"
                        }
                    },
                    "required": [
                        "chainId",
                        "from",
                        "to"
                    ],
                    "type": "object"
                },
                {
                    "properties": {
                        "kind": {
                            "$ref": "#/definitions/TransactionKind.ContractCall",
                            "default": "contract-call"
                        },
                        "method": {
                            "title": "Method",
                            "type": "string"
                        },
                        "parameters": {
                            "$ref": "#/definitions/Array",
                            "title": "Parameters"
                        },
                        "value": {
                            "default": 0,
                            "minimum": 0,
                            "title": "ETH value",
                            "type": "number"
                        }
                    },
                    "required": [
                        "kind",
                        "method",
                        "parameters",
                        "value"
                    ],
                    "type": "object"
                }
            ],
            "title": "Smart contract call"
        },
        "CustodialTreasuryManagementProposal": {
            "$ref": "#/definitions/__type_5"
        },
        "DAOAgents": {
            "enum": [
                "0x336252602b3a8a0be336ed942228305173e8082b",
                "0x7b81e8d4e82796c9b76284fa4d21e57b8b86a06c"
            ],
            "title": "DAO Agent triggering the transaction",
            "type": "string"
        },
        "ERC20Approval": {
            "allOf": [
                {
                    "$ref": "#/definitions/Omit<ERC20Transfer,\"to\">"
                },
                {
                    "properties": {
                        "finalAmountUsed": {
                            "type": "number"
                        },
                        "kind": {
                            "$ref": "#/definitions/TransactionKind.ERC20Approval",
                            "default": "erc20-approval"
                        },
                        "spender": {
                            "$ref": "#/definitions/Address",
                            "title": "Spender"
                        }
                    },
                    "required": [
                        "kind",
                        "spender"
                    ],
                    "type": "object"
                }
            ],
            "title": "ERC20 approval"
        },
        "ERC20Transfer": {
            "allOf": [
                {
                    "properties": {
                        "chainId": {
                            "$ref": "#/definitions/ChainId"
                        },
                        "from": {
                            "$ref": "#/definitions/DAOAgents"
                        },
                        "to": {
                            "$ref": "#/definitions/Address",
                            "title": "Address to send the transaction to"
                        }
                    },
                    "required": [
                        "chainId",
                        "from",
                        "to"
                    ],
                    "type": "object"
                },
                {
                    "properties": {
                        "amount": {
                            "minimum": 0,
                            "title": "Amount",
                            "type": "number"
                        },
                        "kind": {
                            "$ref": "#/definitions/TransactionKind.ERC20Transfer",
                            "default": "erc20-transfer"
                        },
                        "token": {
                            "$ref": "#/definitions/Address",
                            "title": "Token"
                        }
                    },
                    "required": [
                        "amount",
                        "kind",
                        "token"
                    ],
                    "type": "object"
                }
            ],
            "title": "ERC20 transfer"
        },
        "ExpenseProposal": {
            "$ref": "#/definitions/__type_2"
        },
        "Kind.CustodialTreasuryManagement": {
            "enum": [
                "custodial-treasury-management"
            ],
            "type": "string"
        },
        "Kind.Expense": {
            "enum": [
                "expense"
            ],
            "type": "string"
        },
        "Kind.Meta": {
            "enum": [
                "meta"
            ],
            "type": "string"
        },
        "Kind.ParameterChange": {
            "enum": [
                "parameter-change"
            ],
            "type": "string"
        },
        "Kind.Proclamation": {
            "enum": [
                "proclamation"
            ],
            "type": "string"
        },
        "Kind.TreasuryManagement": {
            "enum": [
                "treasury-management"
            ],
            "type": "string"
        },
        "MetaProposal": {
            "$ref": "#/definitions/__type"
        },
        "Omit<ERC20Transfer,\"to\">": {
            "properties": {
                "amount": {
                    "minimum": 0,
                    "title": "Amount",
                    "type": "number"
                },
                "chainId": {
                    "$ref": "#/definitions/ChainId"
                },
                "from": {
                    "$ref": "#/definitions/DAOAgents"
                },
                "kind": {
                    "$ref": "#/definitions/TransactionKind.ERC20Transfer",
                    "default": "erc20-transfer"
                },
                "token": {
                    "$ref": "#/definitions/Address",
                    "title": "Token"
                }
            },
            "required": [
                "amount",
                "chainId",
                "from",
                "kind",
                "token"
            ],
            "type": "object"
        },
        "ParameterChangeProposal": {
            "$ref": "#/definitions/__type_3"
        },
        "ProclamationProposal": {
            "$ref": "#/definitions/__type_1"
        },
        "SnapshotVote": {
            "allOf": [
                {
                    "$ref": "#/definitions/__type_6",
                    "description": "Snapshot Vote related to the proposal"
                },
                {
                    "properties": {
                        "outcome": {
                            "anyOf": [
                                {
                                    "items": {
                                        "type": "string"
                                    },
                                    "type": "array"
                                },
                                {
                                    "type": "string"
                                }
                            ]
                        }
                    },
                    "required": [
                        "outcome"
                    ],
                    "type": "object"
                }
            ],
            "description": "Snapshot vote related to the proposal",
            "title": "Snapshot vote"
        },
        "TransactionKind.ContractCall": {
            "enum": [
                "contract-call"
            ],
            "type": "string"
        },
        "TransactionKind.ERC20Approval": {
            "enum": [
                "erc20-approval"
            ],
            "type": "string"
        },
        "TransactionKind.ERC20Transfer": {
            "enum": [
                "erc20-transfer"
            ],
            "type": "string"
        },
        "TreasuryManagementProposal": {
            "$ref": "#/definitions/__type_4"
        },
        "Vote": {
            "$ref": "#/definitions/__type_6"
        },
        "__type": {
            "description": "Proposal that modifies the current governance process (`specs/N3GOV-v1.ts`\nand `GOVERNANCE.md`)",
            "properties": {
                "kind": {
                    "$ref": "#/definitions/Kind.Meta",
                    "default": "meta"
                },
                "prURI": {
                    "description": "Link to a pull request to this repo on GitHub",
                    "format": "uri",
                    "title": "PR link",
                    "type": "string"
                }
            },
            "required": [
                "kind",
                "prURI"
            ],
            "title": "Meta",
            "type": "object"
        },
        "__type_1": {
            "description": "Proposal for the Nation3 DAO to adopt a statement",
            "properties": {
                "choices": {
                    "$ref": "#/definitions/Array",
                    "title": "Choices"
                },
                "kind": {
                    "$ref": "#/definitions/Kind.Proclamation",
                    "default": "proclamation"
                },
                "statement": {
                    "title": "Statement",
                    "type": "string"
                },
                "votingSystem": {
                    "$ref": "#/definitions/AlternativeSnapshotVotingSystems"
                }
            },
            "required": [
                "choices",
                "kind",
                "statement",
                "votingSystem"
            ],
            "title": "Proclamation",
            "type": "object"
        },
        "__type_2": {
            "description": "Proposal to transfer, approve or interact with a contract moving an ERC20\ntoken outside of the Nation3 DAO's treasury, with the expectation that it\nflows outside of its control",
            "properties": {
                "calls": {
                    "$ref": "#/definitions/Array_1"
                },
                "kind": {
                    "$ref": "#/definitions/Kind.Expense",
                    "default": "expense"
                }
            },
            "required": [
                "calls",
                "kind"
            ],
            "title": "Expense",
            "type": "object"
        },
        "__type_3": {
            "description": "Proposal to perform a parameter change in one of the contracts controlled by\nthe Nation3 DAO",
            "properties": {
                "calls": {
                    "$ref": "#/definitions/Array_2"
                },
                "kind": {
                    "$ref": "#/definitions/Kind.ParameterChange",
                    "default": "parameter-change"
                }
            },
            "required": [
                "calls",
                "kind"
            ],
            "title": "Parameter change",
            "type": "object"
        },
        "__type_4": {
            "description": "Proposal to perform an on-chain treasury management operation.\nExamples: Trading on DEXes, lending, borrowing or buying options on DeFi\nprotocols, adding or removing liquidity from pools",
            "properties": {
                "calls": {
                    "$ref": "#/definitions/Array_2"
                },
                "kind": {
                    "$ref": "#/definitions/Kind.TreasuryManagement",
                    "default": "treasury-management"
                }
            },
            "required": [
                "calls",
                "kind"
            ],
            "title": "Treasury management",
            "type": "object"
        },
        "__type_5": {
            "description": "Proposal to perform a treasury management operation, with the Nation3 DAO\nkeeping the legitimate ownership over the assets but holding them through a\nthird-party entity.\nExamples: Loans to legal entities, equity investments held via a legal\nproxy, liquidations via centralized exchange",
            "properties": {
                "calls": {
                    "$ref": "#/definitions/Array_3"
                },
                "kind": {
                    "$ref": "#/definitions/Kind.CustodialTreasuryManagement",
                    "default": "custodial-treasury-management"
                }
            },
            "required": [
                "calls",
                "kind"
            ],
            "title": "Treasury management (custodial)",
            "type": "object"
        },
        "__type_6": {
            "description": "Snapshot Vote related to the proposal",
            "properties": {
                "passed": {
                    "description": "Whether the proposal had a positive outcome or not",
                    "title": "Passed",
                    "type": "boolean"
                },
                "uri": {
                    "description": "Full URI where the vote is accessible",
                    "format": "uri",
                    "title": "URI",
                    "type": "string"
                }
            },
            "required": [
                "passed",
                "uri"
            ],
            "title": "Vote",
            "type": "object"
        }
    },
    "properties": {
        "content": {
            "anyOf": [
                {
                    "$ref": "#/definitions/MetaProposal",
                    "description": "Proposal that modifies the current governance process (`specs/N3GOV-v1.ts`\nand `GOVERNANCE.md`)"
                },
                {
                    "$ref": "#/definitions/ProclamationProposal",
                    "description": "Proposal for the Nation3 DAO to adopt a statement"
                },
                {
                    "$ref": "#/definitions/ExpenseProposal",
                    "description": "Proposal to transfer, approve or interact with a contract moving an ERC20\ntoken outside of the Nation3 DAO's treasury, with the expectation that it\nflows outside of its control"
                },
                {
                    "$ref": "#/definitions/ParameterChangeProposal",
                    "description": "Proposal to perform a parameter change in one of the contracts controlled by\nthe Nation3 DAO"
                },
                {
                    "$ref": "#/definitions/TreasuryManagementProposal",
                    "description": "Proposal to perform an on-chain treasury management operation.\nExamples: Trading on DEXes, lending, borrowing or buying options on DeFi\nprotocols, adding or removing liquidity from pools"
                },
                {
                    "$ref": "#/definitions/CustodialTreasuryManagementProposal",
                    "description": "Proposal to perform a treasury management operation, with the Nation3 DAO\nkeeping the legitimate ownership over the assets but holding them through a\nthird-party entity.\nExamples: Loans to legal entities, equity investments held via a legal\nproxy, liquidations via centralized exchange"
                }
            ]
        },
        "discussion": {
            "description": "URI where the discussion leading to this proposal can be found",
            "format": "uri",
            "title": "Discussion",
            "type": "string"
        },
        "id": {
            "description": "Numeric identifier for the proposal, assigned at the time of PR creation",
            "minimum": 0,
            "title": "ID of the proposal",
            "type": "number"
        },
        "spec": {
            "default": 1,
            "description": "Version of this spec that the proposal adheres to",
            "minimum": 0,
            "title": "Specification",
            "type": "number"
        },
        "votes": {
            "$ref": "#/definitions/Array_4"
        }
    },
    "required": [
        "content",
        "discussion",
        "id",
        "spec"
    ],
    "type": "object"
}

